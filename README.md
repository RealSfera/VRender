VRender
=======

VRender - программа для построения и визуализации трёхмерных скалярных полей. Построение производится с помощью пользовательской функции (для написания функции используется специальный язык построения). 
При построении можно указывать размер скалярного поля, а при визуализации - размер поля полигонизации, который влияет на детализацию объекта.

В сцене с объектом присутствует один источник света, его параметры, а также материал объекта, можно задавать на вкладке `Освещение и цвет`. 
Объект можно вращать при помощи мыши (при помощи виртуального трэкбола). С помощью колёсика мыши можно приближать\отдалять (zoom).
Есть возможность экспорта полученного объекта в файл формата Wavefront (.obj), при этом экспортируется объект полигонизированный с текущим изо-уровнем.

#### Курсовая работа
Программа была разработана в рамках курсовой работы `3D визуализация скалярных полей с помощью программы VRender` и была защищена на 5 (отлично). Текст курсовой и слайды для презентации находятся в папке docs.
Все материалы доступны под лицензией Creative Commons «Attribution-ShareAlike» («Атрибуция — На тех же условиях») 3.0 Непортированная.

#### Лицензия
Исходный код программы распространяется под лицензией GNU GPL v3.

#### Ссылки на скачивание
##### Версия 1.0.3
###### Linux
https://www.dropbox.com/s/0lri7t3umanzghd/vrender-1.0.3-linux.zip
###### Windows
https://www.dropbox.com/s/fnvgqfa2h0yhx3w/vrender-1.0.3-win.zip

#### Поддерживаемые платформы
Linux, Windows
	
#### Технические детали
Программа разделена на два компонента: libvrender и vrender-gui.
	
libvrender это библиотека для визуализации, в ней расположены компоненты для организации загрузки и работы с шейдерами, текстурами, вводом с клавиатуры и мыши, камера, математическая библиотека (матрицы, вектора, кватернионы, шумы), реализация алгоритма Marching Cubes, парсер языка построения, организация многопоточности (OpenMP), экспорт в Wavefront. Библиотека написана на C. Требует OpenGL 2.1+. Линкуется с vrender-gui статически. Для сборки используется CMake.

Основным компонентом является реализация алгоритма Marching Cubes, которая позволяет, в реальном времени, полигонизировать скалярное поле. Расчёт нормалей производится внутри шейдера, а при экспорте в Wavefront расчёт производится на CPU.

vrender-gui графическая оболочка над libvrender. Написана на C++. Требует Qt4. Для сборки используются средства Qt.
	
#### Почему libvrender написана на C, а не C++?
Первоначально предполагалось написание другого проекта на C (тоже связанного с компьютерной графикой), из-за нехватки времени пришлось изменить тему разработки, но, так как оставалось много наработок на C, было решено продолжить разработку, а GUI часть написать на C++.

#### Происхождение имени
VRender -> Volume Render - визуализатор объёма.

Компиляция
----------
*Все инструкции и ссылки уже устарели*

Внимание! Так как программа использует OpenMP, то рекомендуется использовать компилятор GCC (так как в Clang пока нет поддержки OpenMP)

### Ubuntu

1. Устанавливаем Qt4, QtOpenGL и OpenMP: `sudo apt-get install qt4-dev-tools libqt4-opengl-dev libgomp1`
2. Устанавливаем CMake: `sudo apt-get install cmake`
3. Кладём исходник в любую папку, например, в `~/vrender` и переходим в неё: `cd ~/vrender/`
4. Создаём папку, куда скомпилится libvrender: `mkdir libvrender-build` (лучше использовать имя `libvrender-build`, иначе нужно править `vrender-gui/vrender-gui.pro`) и переходим в неё: `cd libvrender-build`
5. Создаём Makefile с помощью CMake: `cmake ../libvrender`
6. Компилируем libvrender: `make`
7. Переходим обратно в vrender: `cd ../`
8. Теперь создаём папку для vrender-gui: `mkdir vrender-gui-build` и переходим в неё: `cd vrender-gui-build`
9. Создаём Makefile уже с помощью qmake: `qmake ../vrender-gui`
10. Компилируем vrender-gui: `make`
11. Готово! Теперь в папке `vrender-gui-build` лежит программа `vrender-gui`. Приятного пользования!

### Windows

Если возникнут проблемы, то можете воспользоваться инструкциями на сайте: http://qtlinux.narod.ru

Внимание! Использовать компилятор GCC не младше 4.6!

1. Качаем инсталлер MinGW 4.6: http://sourceforge.net/projects/mingw/files/Installer/mingw-get-inst/mingw-get-inst-20120426/mingw-get-inst-20120426.exe
2. Качаем Qt4 Libraries: http://releases.qt-project.org/qt4/source/qt-win-opensource-4.8.4-mingw.exe
3. Качаем Qt Creator: http://releases.qt-project.org/qtcreator/2.6.2/qt-creator-windows-opensource-2.6.2.exe
4. Качаем CMake: http://www.cmake.org/cmake/resources/software.html (Win32 Installer)
5. Устанавливаем CMake
6. Запускаем инсталлер MinGW, везде Далее, в компонентах выбираем C++ компилятор и MSYS Basic System, ожидаем завершение установки MinGW
(Опционально) Собираем и настраиваем GDB отладчик по инструкциям: http://qtlinux.narod.ru/
7. Устанавливаем Qt4 Libraries, выбираем папку MinGW (если не изменяли, то `C:\MinGW`), при появлении ошибки жмём Да, ждём установки
8. Устанавливаем Qt Creator
9. Кладём исходник в любую папку, например, в `C:\vrender\`
10. Запускаем Qt Creator
11. Заходим в Инструменты -> Параметры... -> Сборка и Запуск -> CMake и указываем путь к `cmake.exe` (например, `C:\Program Files\CMake 2.8\bin\cmake.exe`)
12. Заходим в Инструменты -> Параметры... -> Сборка и Запуск -> Компиляторы -> MinGW, указываем путь к компилятору `C:\MinGW\bin\g++.exe`, Применить
13. ... -> Компиляторы -> Профили Qt, Добавить `C:\Qt\4.8.4\bin\qmake.exe`, Применить
14. ... -> Компиляторы -> Наборы -> MinGW (возможно необходимо создать), компилятор MinGW, Профиль Qt -> Qt 4.8.4, Отладчик -> Управление -> Определить, Применить, ОК
15. В Qt Creator открываем файл как проект: `C:\vrender\libvrender\CMakeLists.txt` (Файл - Открыть файл или проект...)
16. Откроется мастер, выбираем каталог сборки libvrender-build: `C:\vrender\libvrender-build` (папку нужно создать) и жмём Далее
17. Выбираем генератор: `Генератор для MinGW (MinGW)`, жмём Запуск CMake и затем Завершить
18. Открываем файл как проект: `C:\vrender\vrender-gui\vrender-gui.pro`, в появившемся меню жмём Настроить проект
19. Заходим во вкладку Проекты, сверху выбираем `vrender-gui`, и потом Зависимости, здесь выбираем `vrender`
20. Жмём на значок компьютера и выбираем сборку Выпуск (также должен быть установлен проект `vrender-gui`)
21. Заходим во вкладку Редактор, жмём правой кнопкой мыши на проект `vrender` и выбираем Пересобрать, ждём сборки
22. Жмём правой кнопкой мыши на проект `vrender-gui` и выбираем Пересобрать
23. После сборки, жмём на зелёную стрелку Запустить
24. Готово! Приятного пользования!
